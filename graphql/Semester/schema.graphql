type Semester {
    id: ID!
    kode_semester: String!
    nama_semester: String!
    tahun_ajaran: String!
    periode: String!
    tanggal_mulai: Date!
    tanggal_selesai: Date!
    status: String!
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    
    kelas: [Kelas!]! @hasMany
    krs: [Krs!]! @hasMany
    khs: [Khs!]! @hasMany
}

input CreateSemesterInput {
    kode_semester: String!
    nama_semester: String!
    tahun_ajaran: String!
    periode: String!
    status: String!
    tanggal_mulai: Date!
    tanggal_selesai: Date!
}

input UpdateSemesterInput {
    id: Int
    kode_semester: String
    nama_semester: String
    tahun_ajaran: String
    status: String
    tanggal_mulai: Date
    tanggal_selesai: Date
}

type SemesterPaginator {
    data: [Semester]!
    paginatorInfo: PageInfo!
}

type PageInfo {
    hasMorePages: Boolean!
    currentPage: Int!
    lastPage: Int!
    perPage: Int!
    total: Int!
}

extend type Query{
    allSemester: [Semester!]! @all(model: "Semester\\Semester")
    semester(id: ID! @eq(key: "id")): Semester @find(model: "Semester\\Semester")
    allSemesterPaginate(
            search: String
            first: Int
            page: Int
        ): SemesterPaginator @field(resolver: "App\\GraphQL\\Semester\\Queries\\SemesterQuery@all")   
    allSemesterArsip(
            search: String
            first: Int
            page: Int
        ): SemesterPaginator @field(resolver: "App\\GraphQL\\Semester\\Queries\\SemesterQuery@allArsip")   
    semesterByTahun(
        tahun_ajaran: String! @where(operator: "like", key: "tahun_ajaran")
    ): [Semester]! @all(model: "Semester\\Semester")
    semesterMahasiswa: [Semester!]!
        @field(resolver: "App\\GraphQL\\Semester\\Queries\\SemesterQuery@forMahasiswa")
        
}

extend type Mutation {
  createSemester(input: CreateSemesterInput! @spread): Semester
    @create(model: "Semester\\Semester")

  updateSemester(
    id: ID! @eq(key: "id"),
    input: UpdateSemesterInput! @spread
  ): Semester
    @update(model: "Semester\\Semester")

  deleteSemester(id: ID! @eq(key: "id")): Semester
    @delete(model: "Semester\\Semester")

  restoreSemester(id: ID!): Semester
    @field(resolver: "Semester\\Mutations\\SemesterMutation@restore")

  forceDeleteSemester(id: ID!): Semester
    @field(resolver: "Semester\\Mutations\\SemesterMutation@forceDelete")
}
