type MataKuliah {
    id: ID!
    kode_mk: String!
    nama_mk: String!
    jurusan_id: Int!
    sks: Int!
    semester_rekomendasi: Int
    jenis: String!
    deskripsi: String
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    
    # Relations
    jurusan: Jurusan! @belongsTo
    kelas: [Kelas!]! @hasMany
    krsDetail: [KrsDetail!]! @hasMany
}

input CreateMataKuliahInput {
    kode_mk: String!
    nama_mk: String!
    jurusan_id: Int!
    sks: Int!
    semester_rekomendasi: Int
    jenis: String
    deskripsi: String
}

input UpdateMataKuliahInput {
    id: Int
    kode_mk: String
    nama_mk: String
    jurusan_id: Int
    sks: Int
    semester_rekomendasi: Int
    jenis: String
    deskripsi: String
}

type MataKuliahPaginator {
    data: [MataKuliah]! 
    paginatorInfo: PageInfo!
}

type PageInfo {
    hasMorePages: Boolean!
    currentPage: Int!
    lastPage: Int!
    perPage: Int!
    total: Int!
}

extend type Query{
    allMataKuliah: [MataKuliah!]! @all(model: "MataKuliah\\MataKuliah")
    matakuliah(id: ID! @eq(key: "id")): MataKuliah @find(model: "MataKuliah\\MataKuliah")
    allMataKuliahPaginate(
            search: String
            first: Int
            page: Int
        ): MataKuliahPaginator @field(resolver: "App\\GraphQL\\MataKuliah\\Queries\\MataKuliahQuery@all")   
    allMataKuliahArsip(
            search: String
            first: Int
            page: Int
        ): MataKuliahPaginator @field(resolver: "App\\GraphQL\\MataKuliah\\Queries\\MataKuliahQuery@allArsip")   
    matakuliahByNama(
        nama_mk: String! @where(operator: "like", key: "nama_mk")
    ): [MataKuliah]! @all(model: "MataKuliah\\MataKuliah")
}

extend type Mutation {
  createMataKuliah(input: CreateMataKuliahInput! @spread): MataKuliah
    @create(model: "MataKuliah\\MataKuliah")

  updateMataKuliah(
    id: ID! @eq(key: "id"),
    input: UpdateMataKuliahInput! @spread
  ): MataKuliah
    @update(model: "MataKuliah\\MataKuliah")

  deleteMataKuliah(id: ID! @eq(key: "id")): MataKuliah
    @delete(model: "MataKuliah\\MataKuliah")

  restoreMataKuliah(id: ID!): MataKuliah
    @field(resolver: "MataKuliah\\Mutations\\MataKuliahMutation@restore")

  forceDeleteMataKuliah(id: ID!): MataKuliah
    @field(resolver: "MataKuliah\\Mutations\\MataKuliahMutation@forceDelete")
}
