type Nilai {
    id: ID!
    krs_detail_id: Int!
    bobot_nilai_id: Int!

    tugas: Float
    quiz: Float
    uts: Float
    uas: Float
    kehadiran: Float
    praktikum: Float

    nilai_akhir: Float
    nilai_huruf: String
    nilai_mutu: Float

    status: String!

    tanggal_input: DateTime
    input_by: Int

    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime

    # Relations
    krsDetail: KrsDetail! @belongsTo
    bobotNilai: BobotNilai @belongsTo
}
# enum NilaiHuruf {
#     A
#     B
#     C
#     D
#     E
# }

# enum String {
#     Draft
#     Final
# }


input CreateNilaiInput {
    krs_detail_id: Int!
    bobot_nilai_id: Int!

    tugas: Float
    quiz: Float
    uts: Float
    uas: Float
    kehadiran: Float
    praktikum: Float

    nilai_akhir: Float
    nilai_huruf: String
    nilai_mutu: Float

    status: String!
    tanggal_input: DateTime
    input_by: Int
}


input UpdateNilaiInput {
    krs_detail_id: Int
    bobot_nilai_id: Int

    tugas: Float
    quiz: Float
    uts: Float
    uas: Float
    kehadiran: Float
    praktikum: Float

    nilai_akhir: Float
    nilai_huruf: String
    nilai_mutu: Float

    status: String
    tanggal_input: DateTime
    input_by: Int
}


type NilaiPaginator {
    data: [Nilai]!
    paginatorInfo: PageInfo!
}

type PageInfo {
    hasMorePages: Boolean!
    currentPage: Int!
    lastPage: Int!
    perPage: Int!
    total: Int!
}


extend type Query{
    allNilai: [Nilai!]! @all(model: "Nilai\\Nilai")
    nilai(id: ID! @eq(key: "id")): Nilai @find(model: "Nilai\\Nilai")
    allNilaiPaginate(
            search: String
            first: Int
            page: Int
        ): NilaiPaginator @field(resolver: "App\\GraphQL\\Nilai\\Queries\\NilaiQuery@all")   
    allNilaiArsip(
            search: String
            first: Int
            page: Int
        ): NilaiPaginator @field(resolver: "App\\GraphQL\\Nilai\\Queries\\NilaiQuery@allArsip")   
    nilaiByHuruf(
        nilai_huruf: String! @where(operator: "like", key: "nilai_huruf")
    ): [Nilai]! @all(model: "Nilai\\Nilai")

    # Change Int! to ID! for all ID parameters
    kelasBySemester(semester_id: ID!): [Kelas]
        @field(resolver: "App\\GraphQL\\Nilai\\Queries\\NilaiQuery@kelasBySemester")
    
    bobotNilaiByMataKuliahSemester(mata_kuliah_id: ID!, semester_id: ID!): BobotNilai
        @field(resolver: "App\\GraphQL\\Nilai\\Queries\\NilaiQuery@bobotNilaiByMataKuliahSemester")
    
    krsDetailByKelas(kelas_id: ID!): [KrsDetail]
        @field(resolver: "App\\GraphQL\\Nilai\\Queries\\NilaiQuery@krsDetailByKelas")
    
    # allGradeSystem: [GradeSystem]
    #     @field(resolver: "App\\GraphQL\\Nilai\\Queries\\NilaiQuery@allGradeSystem")
    
    nilaiByKelas(kelas_id: ID!): [Nilai]
        @field(resolver: "App\\GraphQL\\Nilai\\Queries\\NilaiQuery@nilaiByKelas")
}

extend type Mutation {
  createNilai(input: CreateNilaiInput! @spread): Nilai
    @create(model: "Nilai\\Nilai")

  updateNilai(
    id: ID! @eq(key: "id"),
    input: UpdateNilaiInput! @spread
  ): Nilai
    @update(model: "Nilai\\Nilai")

  deleteNilai(id: ID! @eq(key: "id")): Nilai
    @delete(model: "Nilai\\Nilai")

  restoreNilai(id: ID!): Nilai
    @field(resolver: "Nilai\\Mutations\\NilaiMutation@restore")

  forceDeleteNilai(id: ID!): Nilai
    @field(resolver: "Nilai\\Mutations\\NilaiMutation@forceDelete")
}
